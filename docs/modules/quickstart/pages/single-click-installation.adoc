== One-click Installation Links

FormKiQ is installed / updated using https://docs.aws.amazon.com/cloudformation[AWS CloudFormation] deployments. You will need access to an AWS account that has permissions to use CloudFormation templates to be able to install FormKiQ.

If you do not have a AWS account, you can sign up for one at https://aws.amazon.com.

On the https://github.com/formkiq/formkiq-core#installation[FormKiQ Core Github page] you will find one-click installation links for a number of AWS Regions, as shown below.

image::github-click-install.png[GitHub Click Install,300,300,link="https://github.com/formkiq/formkiq-core#installation"]

Clicking one of the one-click installation links will take your to the CloudFormation console and setup the FormKiQ CloudFormation stack.

NOTE: For FormKiQ Enterprise users, you'll find the same single click installation url in your custom https://github.com[GitHub] repository you were provided.

== CloudFormation Parameters

*Create stack*

After clicking one of the https://github.com/formkiq/formkiq-core#installation[one-click installation links] and logging into your AWS account. You'll be brought to the CloudFormation Create Stack console. You should see the `Amazon S3 URL` being set to one of our FormKiQ installation url. Clicking the `Next` button will bring you to the next page where you can customize your FormKiQ installation.

image::cf-createstack.png[CloudFormation Create Stack,800,800]

*Specify stack details*

On the `Specify stack details` page, is where you customize your FormKiQ installation.

*Set Stack Name*

image::cf-create-stack-name.png[CloudFormation Stack Name,800,800]

The first thing you will need to set, is the CloudFormation Stack Name. The Stack name can include letters (A-Z and a-z), numbers (0-9), and dashes (-). We recommended to use the naming formation, `formkiq-core-<app_environment>`, ie: formkiq-core-prod, formkiq-core-dev, etc. The <app_environment> allows you to differentiate between multiple installations of formkiq. This will give context to each formkiq installation and prevent accidentally deleting the wrong FormKiQ installation stack.

*Set Parameters*

image::cf-create-parameter-adminemail.png[Set Admin Email,1200,800]

Set the admin email address. After FormKiQ installation has completed, this email address will be automatically setup as administrator and be sent an email to set the password to the account.

image::cf-create-parameter-appenvironment.png[Set App Environment,1200,800]

AppEnvironment is a unique identifier for FormKiQ installations. The identifier should provider context to what kind of information is contained in the installation, IE: prod, staging, dev.

image::cf-create-parameter-capacityprovider.png[Set Capacity Provider,1200,800]

FormKiQ uses AWS Fargate service to run certain services. AWS Fargate supports using either FARGATE or FARGATE_SPOT capacity provider. While FARGATE_SPOT is much cheaper, it should only be used for development environments and FARGATE should be used for production environments.

image::cf-create-parameter-enablepublic.png[Set Enable Public Urls,1200,800]

Whether to enable "/public" endpoints, defaults to false.

image::cf-create-parameter-passwords.png[Set Password Policy,1200,800]

FormKiQ uses https://aws.amazon.com/cognito[Amazon Cognito] as the identity store for all users. Cognito support number of different password policies that you can configure.

image::cf-create-parameter-typesense.png[Configure TypesenseApiKey,1200,800]

Optional: API Key to access the https://typesense.org[Typesense] server. https://typesense.org[Typesense] is used to provide text search support. The API Key can be any random string of characters. To enable Typesense, the `VpcStackName` to be set (see VPC CloudFormation).

image::cf-create-parameter-vpc-stackname.png[Configure VPC,1200,800]

Optional: The name of the FormKiQ VPC CloudFormation stack. See *VPC CloudFormation*

*Submit Create Stack*

Keep selecting `Next` until you get to the last `Submit Create Stack` page.

image::cf-create-stack-submit.png[Submit Create Stack,1200,800]

== VPC CloudFormation

Certain FormKiQ features require a VPC to be configured and then the FormKiQ stack needs to be updated to use VPC.

On the https://github.com/formkiq/formkiq-core#installation[FormKiQ Core Github page] you can find one-click VPC installation links.

image::github-vpc-install.png[Github VPC Install,600,600]

NOTE: When selecting a VPC region, it needs to be in the same region as your FormKiQ installation.

*Create stack*

After clicking one of the one-click installation links and logging into your AWS account. You'll be brought to the CloudFormation Create Stack console. The `Amazon S3 URL` is populated with the FormKiQ installation url.

image::cf-createstack-vpc.png[CloudFormation Create Stack,800,800]

After clicking `Next`.

*Set Stack Name*

When creating the VPC, you need to specify a IPv4 network range for the VPC, in CIDR notation. For example, 10.1.0.0/16.

The VPC is also configured with 3 public and 3 private subnets.

image::cf-create-parameters-cidr.png[CloudFormation CIDR,1000,800]

NOTE: For FormKiQ Enterprise users, make sure you set `EnableEnterpriseFeatures` to `true`.

*Update FormKiQ Stack*

After creating the VPC stack, the FormKiQ CloudFormation stack needs to be updated.

image::cf-updatestack.png[CloudFormation Update Stack,800,800]

Clicking on the FormKiQ CloudFormation stack and the `Update` button.

Updating the stack you will `Use current template`.

image::cf-create-parameter-vpc-stackname.png[Set VPC Stack Name,800,800]

For the `VpcStackName` parameter, set the value to the same name of the VPC stack you created above.

== Welcome to FormKiQ

Once the FormKiQ CloudFormation installation has completed. You will receive an email that will provide a link to confirm your email address and set a password for your administrator account.

image::welcome-to-formkiq.png[Welcome to FormKiQ,600,600]

Clicking the `Verify Email` link will allow you to set your administrator password.

image::fk-console-setpassword.png[Set Admin Password,600,600]

Once your password is set you can now login to the FormKiQ Console.

image::fk-console-login.png[FormKiQ Console Login,600,600]

Once in the FormKiQ Console, you can start working with FormKiQ.

image::fk-console-home.png[FormKiQ Console Home,1000,600]


// video::jVIK2ZJZsKE[youtube,title=Install FormKiQ Core into any AWS Account,width=640,height=480]
