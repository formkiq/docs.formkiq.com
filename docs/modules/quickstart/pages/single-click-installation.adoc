== One-click Installation Links

For this quickstart you will need access to an AWS account, preferably with administrator access. The FormKiQ installation will create a number of AWS services and using an account with administrator access will ensure you have the correct permissions.

The FormKiQ installation process uses https://docs.aws.amazon.com/cloudformation[AWS CloudFormation]. https://docs.aws.amazon.com/cloudformation[AWS CloudFormation] is a service that automates the process of creating and managing cloud resources. It allows you to easily install and update FormKiQ using a single url.

If you do not have a AWS account, you can sign up for one at https://aws.amazon.com.

To install FormKiQ, start by visiting the https://github.com/formkiq/formkiq-core[FormKiQ github page].

Scroll down to the installation section. Here is where youâ€™ll find the FormKiQ installation links. Each installation link is tied to a specific AWS region. This allows you to create or update your FormKiQ installation with a single click!

image::github-click-install.png[GitHub Click Install,300,300,link="https://github.com/formkiq/formkiq-core#installation"]

NOTE: For FormKiQ Pro and Enterprise users, you'll find a similar single click installation url in your custom https://github.com[GitHub] repository you were provided.

== Install FormKiQ

To install FormKiQ, select the installation link for the AWS region you want to install FormKiQ to from the https://github.com/formkiq/formkiq-core#installation[FormKiQ github page].

image::github-click-install.png[GitHub Click Install,300,300,link="https://github.com/formkiq/formkiq-core#installation"]

Clicking the installation link will bring you to the AWS Console Login if you are not already logged in. Once you are logged in, you will be taken to the `CloudFormation Create Stack` page. As you can see the Amazon S3 URL is automatically populated with the FormKiQ installation url. This url tells CloudFormation where it can find the CloudFormation yaml files that describes all the FormKiQ resources to create.

image::cf-createstack.png[CloudFormation Create Stack,800,800]

Clicking the `Next` button will take you to the stack details page. On this page we can configure FormKiQ.

image::cf-create-stack-name.png[CloudFormation Stack Name,800,800]

The first thing you will need to set is the CloudFormation Stack Name. The Stack name can include letters (A-Z and a-z), numbers (0-9), and dashes (-). We recommended to use the naming convention `formkiq-core-<app_environment>`, ie: formkiq-core-prod, formkiq-core-dev, etc. The <app_environment> allows you to differentiate between multiple installations of FormKiQ. This will give context to each FormKiQ installation and prevent accidentally deleting the wrong FormKiQ installation stack.

TIP: For production installations, we recommend using https://aws.amazon.com/organizations/[AWS Organizations^] to create a separate account to run your production version of FormKiQ. AWS makes it easy to switch between accounts within an organization, and best practice is to keep your production environment in a separate account from any non-production resources. This not only helps with security, but also to help organize your costs. Ideally, you would have a new AWS account within your AWS organization for each environment (e.g., dev, test/qa, staging/pre-prod, and production).

image::cf-create-parameter-adminemail.png[Set Admin Email,1200,800]

Set the admin email address. During the FormKiQ installation, this email address will be automatically set up with administrator access. An email will be sent to the address  that provides a link to where the administrator password can be set.

image::cf-create-parameter-appenvironment.png[Set App Environment,1200,800]

AppEnvironment is a unique identifier for FormKiQ installations. The identifier should provider context to what kind of information is contained in the installation, IE: prod, staging, dev.

image::cf-create-parameter-capacityprovider.png[Set Capacity Provider,1200,800]

FormKiQ uses AWS Fargate service to run certain services. AWS Fargate supports using either FARGATE or FARGATE_SPOT capacity provider. While FARGATE_SPOT is much cheaper, we recommend that it be used only for development environments, with FARGATE being used for production environments.

image::cf-create-parameter-enablepublic.png[Set Enable Public Urls,1200,800]

Whether to enable "/public" endpoints, defaults to false. Public endpoints allow external users to submit documents, such as through a web form. As with any publicly-available functionality, there is a risk of abuse if enabled.

NOTE: You can always enable/disable your public endpoints at any time by updating your FormKiQ CloudFormation Stack and changing the value you've set.

image::cf-create-parameter-passwords.png[Set Password Policy,1200,800]

FormKiQ uses https://aws.amazon.com/cognito[Amazon Cognito^] as the identity store for all users. Cognito support number of different password policies that you can configure.

image::cf-create-parameter-typesense.png[Configure TypesenseApiKey,1200,800]

Optional: API Key to access the https://typesense.org[Typesense^] server. https://typesense.org[Typesense^] is used to provide full text search support for document metadata. The API Key can be any random string of characters. To enable Typesense, the `VpcStackName` also needs to be set (see link:#vpc-cloudformation[VPC CloudFormation]).

NOTE: Typesense is optional, since it requires a VPC to be created, which can add to your AWS usage costs. Without Typesense, you will only be able to search documents using tags and the document's created date.

image::cf-create-parameter-vpc-stackname.png[Configure VPC,1200,800]

Optional: The name of the FormKiQ VPC CloudFormation stack (currently used for both Typesense and OpenSearch). You will need to deploy the link:#vpc-cloudformation[VPC CloudFormation] in order to have a VPC Stack Name to provide here. We recommend that you create this main FormKiQ stack first, and then run the VPC stack, before finally updating the main stack with the VPC Stack Name.

Keep selecting `Next` until you get to the last `Submit Create Stack` page. Once you've checked the checkboxes, you can click `Submit` to being the stack creation.

image::cf-create-stack-submit.png[Submit Create Stack,1200,800]

The operation to create your new FormKiQ stack should take between fifteen and thirty minutes.

== Welcome to FormKiQ Email

Once the FormKiQ CloudFormation installation has completed, an email will be sent to the email specified as the AdminEmail. This email will contain a link that will confirm the email address and allow the recipient to set a password for the administrator account.

image::welcome-to-formkiq.png[Welcome to FormKiQ,600,600]

Clicking the `Verify Email` link will allow you to set your administrator password.

image::fk-console-setpassword.png[Set Admin Password,600,600]

Once your password is set you can now login to the FormKiQ Console.

image::fk-console-login.png[FormKiQ Console Login,600,600]

Once in the FormKiQ Console, you can start working with FormKiQ.

image::fk-console-home.png[FormKiQ Console Home,1000,600]

NOTE: Additional FormKiQ users can be created using https://aws.amazon.com/cognito/[Amazon Cognito^]. See xref:authentication:README.adoc[Authentication / Authorization] for more information.


// video::jVIK2ZJZsKE[youtube,title=Install FormKiQ Core into any AWS Account,width=640,height=480]

== VPC CloudFormation

Certain FormKiQ features (currently Typesense and the OpenSearch add-on for FormKiQ Enterprise) require a VPC to be configured, and then the FormKiQ stack needs to be updated to use that VPC.

On the https://github.com/formkiq/formkiq-core#installation[FormKiQ Core Github page^] you can find one-click VPC installation links.

image::github-vpc-install.png[Github VPC Install,600,600]

NOTE: When selecting a VPC region, **it needs to be in the same region as your FormKiQ installation**.

*Create stack*

After clicking one of the one-click VPC installation links and logging into your AWS account, you'll be brought to the CloudFormation Create Stack console. The `Amazon S3 URL` is populated with the FormKiQ VPC installation URL.

image::cf-createstack-vpc.png[CloudFormation Create Stack,800,800]

Click `Next` to continue to the configuration page.

*Set Parameters*

Stack Name will be needed for when you update the main FormKiQ stack.

image::cf-create-parameters-vpc-stack-name.png[CloudFormation VPC Stack Name,1000,800]

EnableEnterpriseFeatures is for FormKiQ Enterprise; it must be set to true in order for FormKiQ Enterprise to be configured correctly for any add-ons or customizations. **It is not required for FormKiQ Core or Pro.**

image::cf-create-parameters-vpc-enable-enterprise-features.png[CloudFormation VPC Enable Enterprise Features,1000,800]

When creating the VPC, you need to specify an IPv4 network range for the VPC, in CIDR notation. For example, 10.1.0.0/16.

NOTE: We recommend choosing a CIDR block that you know is not being used by any existing AWS resources in your AWS Organization. Ideally, each AWS account (one for each environment) is using its own CIDR range, e.g., 10.10.0.0/16 for dev, 10.20.0.0/16 for test/qa, etc.

The VPC is also configured with 3 public and 3 private subnets.

image::cf-create-parameters-cidr.png[CloudFormation VPC CIDR,1000,800]

VpcLabel: you should also provide a label for the VPC. This will be visible in the AWS Management Console when viewing your VPCs, and will help identify this VPC in future.

image::cf-create-parameters-vpc-label.png[CloudFormation VPC Label,1000,800]

*Update FormKiQ Stack*

After creating the VPC stack, the main FormKiQ CloudFormation stack needs to be updated.

image::cf-updatestack.png[CloudFormation Update Stack,800,800]

Select the FormKiQ CloudFormation stack and then click the `Update` button.

When updating the stack you will want to choose `Use current template`.

image::cf-create-parameter-vpc-stackname.png[Set VPC Stack Name,800,800]

For the `VpcStackName` parameter, set the value to the same value you used for the VPC stack you created above.

Keep selecting `Next` until you get to the last `Submit Create Stack` page. Once you've checked the checkboxes, you can click `Submit` to being the stack creation.

image::cf-create-stack-submit.png[Submit Create Stack,1200,800]

